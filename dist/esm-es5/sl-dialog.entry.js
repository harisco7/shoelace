var __awaiter=this&&this.__awaiter||function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,n){function l(e){try{r(o.next(e))}catch(t){n(t)}}function s(e){try{r(o["throw"](e))}catch(t){n(t)}}function r(e){e.done?i(e.value):a(e.value).then(l,s)}r((o=o.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,a,n,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(e){return function(t){return r([e,t])}}function r(l){if(o)throw new TypeError("Generator is already executing.");while(i)try{if(o=1,a&&(n=l[0]&2?a["return"]:l[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,l[1])).done)return n;if(a=0,n)l=[l[0]&2,n.value];switch(l[0]){case 0:case 1:n=l;break;case 4:i.label++;return{value:l[1],done:false};case 5:i.label++;a=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(n=i.trys,n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1];n=l;break}if(n&&i.label<n[2]){i.label=n[2];i.ops.push(l);break}if(n[2])i.ops.pop();i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s];a=0}finally{o=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-a0f9580d.js";import{h as hasSlot}from"./slot-2d57ba5d.js";import{u as unlockBodyScrolling,l as lockBodyScrolling}from"./scroll-39592922.js";import{i as isPreventScrollSupported,M as Modal}from"./modal-78a2de66.js";var dialogCss=":host{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box}:host *,:host *:before,:host *:after{-webkit-box-sizing:inherit;box-sizing:inherit}:host{--width:31rem;display:contents}.dialog{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--sl-z-index-dialog)}.dialog:not(.dialog--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.dialog__panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;z-index:2;width:var(--width);max-width:calc(100% - var(--sl-spacing-xx-large));max-height:calc(100% - var(--sl-spacing-xx-large));background-color:var(--sl-panel-background-color);border-radius:var(--sl-border-radius-medium);-webkit-box-shadow:var(--sl-shadow-x-large);box-shadow:var(--sl-shadow-x-large);opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8);-webkit-transition:var(--sl-transition-medium) opacity, var(--sl-transition-medium) transform;transition:var(--sl-transition-medium) opacity, var(--sl-transition-medium) transform}.dialog__panel:focus{outline:none}@media screen and (max-width: 420px){.dialog__panel{max-height:80vh}}.dialog--open .dialog__panel{display:-ms-flexbox;display:flex;opacity:1;-webkit-transform:none;transform:none}.dialog__header{-ms-flex:0 0 auto;flex:0 0 auto;display:-ms-flexbox;display:flex}.dialog__title{-ms-flex:1 1 auto;flex:1 1 auto;font-size:var(--sl-font-size-large);line-height:var(--sl-line-height-dense);padding:var(--sl-spacing-large)}.dialog__close{-ms-flex:0 0 auto;flex:0 0 auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;font-size:var(--sl-font-size-x-large);padding:0 var(--sl-spacing-large)}.dialog__body{-ms-flex:1 1 auto;flex:1 1 auto;padding:var(--sl-spacing-large);overflow:auto;-webkit-overflow-scrolling:touch}.dialog__footer{-ms-flex:0 0 auto;flex:0 0 auto;text-align:right;padding:var(--sl-spacing-large)}.dialog__footer ::slotted(sl-button:not(:first-of-type)){margin-left:var(--sl-spacing-x-small)}.dialog:not(.dialog--has-footer) .dialog__footer{display:none}.dialog__overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:var(--sl-overlay-background-color);opacity:0;-webkit-transition:var(--sl-transition-medium) opacity;transition:var(--sl-transition-medium) opacity}.dialog--open .dialog__overlay{opacity:1}";var hasPreventScroll=isPreventScrollSupported();var id=0;var Dialog=function(){function e(e){registerInstance(this,e);this.slShow=createEvent(this,"sl-show",7);this.slAfterShow=createEvent(this,"sl-after-show",7);this.slHide=createEvent(this,"sl-hide",7);this.slAfterHide=createEvent(this,"sl-after-hide",7);this.slInitialFocus=createEvent(this,"sl-initial-focus",7);this.slOverlayDismiss=createEvent(this,"sl-overlay-dismiss",7);this.componentId="dialog-"+ ++id;this.willShow=false;this.willHide=false;this.hasFooter=false;this.isVisible=false;this.open=false;this.label="";this.noHeader=false}e.prototype.handleOpenChange=function(){this.open?this.show():this.hide()};e.prototype.connectedCallback=function(){var e=this;this.handleCloseClick=this.handleCloseClick.bind(this);this.handleTransitionEnd=this.handleTransitionEnd.bind(this);this.handleKeyDown=this.handleKeyDown.bind(this);this.handleOverlayClick=this.handleOverlayClick.bind(this);this.handleSlotChange=this.handleSlotChange.bind(this);this.modal=new Modal(this.host,{onFocusOut:function(){return e.panel.focus()}})};e.prototype.componentWillLoad=function(){this.handleSlotChange();if(this.open){this.show()}};e.prototype.disconnectedCallback=function(){unlockBodyScrolling(this.host)};e.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(i){if(this.willShow){return[2]}e=this.slShow.emit();if(e.defaultPrevented){this.open=false;return[2]}this.willShow=true;this.isVisible=true;this.open=true;this.modal.activate();lockBodyScrolling(this.host);if(this.open){if(hasPreventScroll){requestAnimationFrame((function(){var e=t.slInitialFocus.emit();if(!e.defaultPrevented){t.panel.focus({preventScroll:true})}}))}else{setTimeout((function(){var e=t.slInitialFocus.emit();if(!e.defaultPrevented){t.panel.focus()}}),250)}}return[2]}))}))};e.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){if(this.willHide){return[2]}e=this.slHide.emit();if(e.defaultPrevented){this.open=true;return[2]}this.willHide=true;this.open=false;this.modal.deactivate();unlockBodyScrolling(this.host);return[2]}))}))};e.prototype.handleCloseClick=function(){this.hide()};e.prototype.handleKeyDown=function(e){if(e.key==="Escape"){this.hide()}};e.prototype.handleOverlayClick=function(){var e=this.slOverlayDismiss.emit();if(!e.defaultPrevented){this.hide()}};e.prototype.handleSlotChange=function(){this.hasFooter=hasSlot(this.host,"footer")};e.prototype.handleTransitionEnd=function(e){var t=e.target;if(e.propertyName==="opacity"&&t.classList.contains("dialog__panel")){this.isVisible=this.open;this.willShow=false;this.willHide=false;this.open?this.slAfterShow.emit():this.slAfterHide.emit()}};e.prototype.render=function(){var e=this;return h("div",{ref:function(t){return e.dialog=t},part:"base",class:{dialog:true,"dialog--open":this.open,"dialog--visible":this.isVisible,"dialog--has-footer":this.hasFooter},onKeyDown:this.handleKeyDown,onTransitionEnd:this.handleTransitionEnd},h("div",{part:"overlay",class:"dialog__overlay",onClick:this.handleOverlayClick}),h("div",{ref:function(t){return e.panel=t},part:"panel",class:"dialog__panel",role:"dialog","aria-modal":"true","aria-hidden":this.open?"false":"true","aria-label":this.noHeader?this.label:null,"aria-labelledby":!this.noHeader?this.componentId+"-title":null,tabIndex:0},!this.noHeader&&h("header",{part:"header",class:"dialog__header"},h("span",{part:"title",class:"dialog__title",id:this.componentId+"-title"},h("slot",{name:"label"},this.label||String.fromCharCode(65279))),h("sl-icon-button",{exportparts:"base:close-button",class:"dialog__close",name:"x",onClick:this.handleCloseClick})),h("div",{part:"body",class:"dialog__body"},h("slot",null)),h("footer",{part:"footer",class:"dialog__footer"},h("slot",{name:"footer",onSlotchange:this.handleSlotChange}))))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{open:["handleOpenChange"]}},enumerable:false,configurable:true});return e}();Dialog.style=dialogCss;export{Dialog as sl_dialog};