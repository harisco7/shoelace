var __awaiter=this&&this.__awaiter||function(e,t,r,i){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function n(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):a(e.value).then(n,s)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,a,o,n;return n={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function s(e){return function(t){return l([e,t])}}function l(n){if(i)throw new TypeError("Generator is already executing.");while(r)try{if(i=1,a&&(o=n[0]&2?a["return"]:n[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,n[1])).done)return o;if(a=0,o)n=[n[0]&2,o.value];switch(n[0]){case 0:case 1:o=n;break;case 4:r.label++;return{value:n[1],done:false};case 5:r.label++;a=n[1];n=[0];continue;case 7:n=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(n[0]===6||n[0]===2)){r=0;continue}if(n[0]===3&&(!o||n[1]>o[0]&&n[1]<o[3])){r.label=n[1];break}if(n[0]===6&&r.label<o[1]){r.label=o[1];o=n;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(n);break}if(o[2])r.ops.pop();r.trys.pop();continue}n=t.call(e,r)}catch(s){n=[6,s];a=0}finally{i=o=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-a0f9580d.js";import{h as hasSlot}from"./slot-2d57ba5d.js";import{u as unlockBodyScrolling,l as lockBodyScrolling}from"./scroll-39592922.js";import{i as isPreventScrollSupported,M as Modal}from"./modal-78a2de66.js";var drawerCss=":host{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box}:host *,:host *:before,:host *:after{-webkit-box-sizing:inherit;box-sizing:inherit}:host{--size:25rem;display:contents}.drawer{top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}.drawer:not(.drawer--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.drawer--contained{position:absolute;z-index:initial}.drawer--fixed{position:fixed;z-index:var(--sl-z-index-drawer)}.drawer__panel{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;z-index:2;max-width:100%;max-height:100%;background-color:var(--sl-panel-background-color);-webkit-box-shadow:var(--sl-shadow-x-large);box-shadow:var(--sl-shadow-x-large);-webkit-transition:var(--sl-transition-medium) transform;transition:var(--sl-transition-medium) transform;overflow:auto;pointer-events:all}.drawer__panel:focus{outline:none}.drawer--top .drawer__panel{top:0;right:auto;bottom:auto;left:0;width:100%;height:var(--size);-webkit-transform:translate(0, -100%);transform:translate(0, -100%)}.drawer--right .drawer__panel{top:0;right:0;bottom:auto;left:auto;width:var(--size);height:100%;-webkit-transform:translate(100%, 0);transform:translate(100%, 0)}.drawer--bottom .drawer__panel{top:auto;right:auto;bottom:0;left:0;width:100%;height:var(--size);-webkit-transform:translate(0, 100%);transform:translate(0, 100%)}.drawer--left .drawer__panel{top:0;right:auto;bottom:auto;left:0;width:var(--size);height:100%;-webkit-transform:translate(-100%, 0);transform:translate(-100%, 0)}.drawer--open .drawer__panel{-webkit-transform:translate(0, 0);transform:translate(0, 0)}.drawer__header{display:-ms-flexbox;display:flex}.drawer__title{-ms-flex:1 1 auto;flex:1 1 auto;font-size:var(--sl-font-size-large);line-height:var(--sl-line-height-dense);padding:var(--sl-spacing-large)}.drawer__close{-ms-flex:0 0 auto;flex:0 0 auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;font-size:var(--sl-font-size-x-large);padding:0 var(--sl-spacing-large)}.drawer__body{-ms-flex:1 1 auto;flex:1 1 auto;padding:var(--sl-spacing-large);overflow:auto;-webkit-overflow-scrolling:touch}.drawer__footer{text-align:right;padding:var(--sl-spacing-large)}.drawer__footer ::slotted(sl-button:not(:last-of-type)){margin-right:var(--sl-spacing-x-small)}.drawer:not(.drawer--has-footer) .drawer__footer{display:none}.drawer__overlay{display:block;position:fixed;top:0;right:0;bottom:0;left:0;background-color:var(--sl-overlay-background-color);opacity:0;-webkit-transition:var(--sl-transition-medium) opacity;transition:var(--sl-transition-medium) opacity;pointer-events:all}.drawer--contained .drawer__overlay{position:absolute}.drawer--open .drawer__overlay{opacity:1}";var hasPreventScroll=isPreventScrollSupported();var id=0;var Drawer=function(){function e(e){registerInstance(this,e);this.slShow=createEvent(this,"sl-show",7);this.slAfterShow=createEvent(this,"sl-after-show",7);this.slHide=createEvent(this,"sl-hide",7);this.slAfterHide=createEvent(this,"sl-after-hide",7);this.slInitialFocus=createEvent(this,"sl-initial-focus",7);this.slOverlayDismiss=createEvent(this,"sl-overlay-dismiss",7);this.componentId="drawer-"+ ++id;this.willShow=false;this.willHide=false;this.hasFooter=false;this.isVisible=false;this.open=false;this.label="";this.placement="right";this.contained=false;this.noHeader=false}e.prototype.handleOpenChange=function(){this.open?this.show():this.hide()};e.prototype.connectedCallback=function(){var e=this;this.handleCloseClick=this.handleCloseClick.bind(this);this.handleTransitionEnd=this.handleTransitionEnd.bind(this);this.handleKeyDown=this.handleKeyDown.bind(this);this.handleOverlayClick=this.handleOverlayClick.bind(this);this.handleSlotChange=this.handleSlotChange.bind(this);this.modal=new Modal(this.host,{onFocusOut:function(){return e.contained?null:e.panel.focus()}})};e.prototype.componentWillLoad=function(){this.handleSlotChange();if(this.open){this.show()}};e.prototype.disconnectedCallback=function(){unlockBodyScrolling(this.host)};e.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(r){if(this.willShow){return[2]}e=this.slShow.emit();if(e.defaultPrevented){this.open=false;return[2]}this.willShow=true;this.isVisible=true;this.open=true;if(!this.contained){this.modal.activate();lockBodyScrolling(this.host)}if(this.open){if(hasPreventScroll){requestAnimationFrame((function(){var e=t.slInitialFocus.emit();if(!e.defaultPrevented){t.panel.focus({preventScroll:true})}}))}else{setTimeout((function(){var e=t.slInitialFocus.emit();if(!e.defaultPrevented){t.panel.focus()}}),250)}}return[2]}))}))};e.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){if(this.willHide){return[2]}e=this.slHide.emit();if(e.defaultPrevented){this.open=true;return[2]}this.willHide=true;this.open=false;this.modal.deactivate();unlockBodyScrolling(this.host);return[2]}))}))};e.prototype.handleCloseClick=function(){this.hide()};e.prototype.handleKeyDown=function(e){if(e.key==="Escape"){this.hide()}};e.prototype.handleOverlayClick=function(){var e=this.slOverlayDismiss.emit();if(!e.defaultPrevented){this.hide()}};e.prototype.handleSlotChange=function(){this.hasFooter=hasSlot(this.host,"footer")};e.prototype.handleTransitionEnd=function(e){var t=e.target;if(e.propertyName==="transform"&&t.classList.contains("drawer__panel")){this.isVisible=this.open;this.willShow=false;this.willHide=false;this.open?this.slAfterShow.emit():this.slAfterHide.emit()}};e.prototype.render=function(){var e=this;return h("div",{ref:function(t){return e.drawer=t},part:"base",class:{drawer:true,"drawer--open":this.open,"drawer--visible":this.isVisible,"drawer--top":this.placement==="top","drawer--right":this.placement==="right","drawer--bottom":this.placement==="bottom","drawer--left":this.placement==="left","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--has-footer":this.hasFooter},onKeyDown:this.handleKeyDown,onTransitionEnd:this.handleTransitionEnd},h("div",{part:"overlay",class:"drawer__overlay",onClick:this.handleOverlayClick}),h("div",{ref:function(t){return e.panel=t},part:"panel",class:"drawer__panel",role:"dialog","aria-modal":"true","aria-hidden":this.open?"false":"true","aria-label":this.noHeader?this.label:null,"aria-labelledby":!this.noHeader?this.componentId+"-title":null,tabIndex:0},!this.noHeader&&h("header",{part:"header",class:"drawer__header"},h("span",{part:"title",class:"drawer__title",id:this.componentId+"-title"},h("slot",{name:"label"},this.label||String.fromCharCode(65279))),h("sl-icon-button",{exportparts:"base:close-button",class:"drawer__close",name:"x",onClick:this.handleCloseClick})),h("div",{part:"body",class:"drawer__body"},h("slot",null)),h("footer",{part:"footer",class:"drawer__footer"},h("slot",{name:"footer",onSlotchange:this.handleSlotChange}))))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{open:["handleOpenChange"]}},enumerable:false,configurable:true});return e}();Drawer.style=drawerCss;export{Drawer as sl_drawer};